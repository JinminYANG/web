<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		*{
			margin: 0;
		}
		body{
			padding: 300px 50px;
		}
		#banner_wrap{
			position: relative;
			width: 600px;
		}

		#banner.active{
			height: 190px;
			border: 1px solid #ccc;
		}
		#banner{
			width: 600px;
			height: 0px;
			position: relative;
			overflow: hidden;
			background: url(img/bg.png);
			background-size: contain;
			border-bottom: 1px solid #666;
			border-top: 1px solid #333;
			box-sizing: border-box;
			transition-duration: 0.5s;
		}
		#banner:hover{
			cursor: pointer;
		}
		#banner img{
			display: block;
			position: absolute;
			width: 150px;
			height: auto;
		}

		#sound_btn{
			position: absolute;
			left: 10px;
			bottom: 10px;
			outline: none;
			width: 50px;
			height: auto;
		}
		#toggle{
			position: absolute;
			right: 0;
			bottom: -18px;
			background: #666;
			color: #fff;
			font-size: 12px;
			line-height: 18px;
			padding: 0 5px;
			text-decoration: none;
		}
		#toggle:hover{
			text-decoration: underline;
		}
	</style>
</head>
<body>
	<div id="banner_wrap">
		<figure id="banner" class="active">
			<img src="img/balloon_01.png" alt="h">	
			<img src="img/balloon_02.png" alt="e">	
			<img src="img/balloon_03.png" alt="l">	
			<img src="img/balloon_04.png" alt="l">	
			<img src="img/balloon_05.png" alt="o">	
			<img src="img/balloon_01.png" alt="h">	
			<img src="img/balloon_02.png" alt="e">	
			<img src="img/balloon_03.png" alt="l">	
			<img src="img/balloon_04.png" alt="l">	
			<img src="img/balloon_05.png" alt="o">
			<input type="image" name="sound_btn" id="sound_btn" src="img/speaker_on.png" alt="sound">
		</figure>
		<a href="#" id="toggle">배너 닫기</a>
	</div>

    <!-- <script src="js/jquery-1.11.3.min.js"></script> -->
	<script>
		var banner = document.getElementById("banner"),
		img = banner.getElementsByTagName("img"),
		toggle = document.getElementById("toggle"),
		sound_btn = document.getElementById("sound_btn");

		var banner_height = getComputedStyle(banner).height;
		var cast = []; // 풍선 객체

		function set_balloon(num){ //풍선 객체 생성
			var x = Math.floor(Math.random() * (500-10) + 10),
			y = Math.floor(Math.random() * (400-120) + 120),
			size = Math.floor(Math.random() * (200-100) + 100),
			angle = Math.floor(Math.random() * (360-0) + 0),
			speed = Math.random() * (2-0) + 0;

			cast[num] ={
				x:x,
				y:-y,
				size:size,
				angle:angle,
				speed:speed
			};
		}

		function ball_init(){ //풍선 객체 초기화
			for(var i =0; i<img.length; i++){
				set_balloon(i);
				img[i].style.left = '-9999px';
				img[i].style.top = '-9999px';
			}
		}

		function animate_balloon(){ //풍선 애니메이션
			for(var i=0; i<img.length; i++){
				img[i].style.left = cast[i].x + "px";
				img[i].style.top = cast[i].y + "px";
				img[i].style.transform = 'rotate(' + cast[i].angle + 'deg)';

				if(cast[i].y < parseInt(banner_height)){
					cast[i].y += 1 + cast[i].speed;
					cast[i].angle += cast[i].speed;
				}else{
					set_balloon(i);
				}
			}
		}

		function bgm_init(){
			var bgm = new Audio();
			bgm.src = 'img/bgm.mp3';
			bgm.loop = true;
			document.body.appendChild(bgm);
		}

		sound_btn.onclick = function(event){
			var attr = sound_btn.getAttribute("class");
			var bgm = document.getElementsByTagName("audio");

			if(attr == 'active'){
				sound_btn.removeAttribute("class");
				sound_btn.setAttribute("src", "img/speaker_off.png");
				bgm[0].pause();
			}else{
				sound_btn.removeAttribute("class","active");
				sound_btn.setAttribute("src", "img/speaker_on.png");
				bgm[0].play();
			}
		}

		toggle.onclick = function(){
			
		}

		ball_init();
		setInterval(function(){animate_balloon();}, 1000/30);
		bgm_init();

	</script>
</body>
</html>